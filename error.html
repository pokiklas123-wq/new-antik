<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #1a1a2e;
            color: white;
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }
        
        .error-container {
            max-width: 600px;
            background: #16213e;
            padding: 40px;
            border-radius: 15px;
            border: 2px solid #4cc9f0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        h1 {
            color: #f05454;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        
        .icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .message {
            font-size: 1.2em;
            margin-bottom: 25px;
            line-height: 1.6;
            color: #e6e6e6;
        }
        
        .room-info {
            background: #0f3460;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: right;
        }
        
        .room-info span {
            color: #4cc9f0;
            font-weight: bold;
        }
        
        .actions {
            margin-top: 30px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: #4361ee;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 0 10px;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn:hover {
            background: #3a56d4;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #f05454;
        }
        
        .btn-secondary:hover {
            background: #d94343;
        }
    </style>
</head>
<body>
    <div class="error-container">
        <div class="icon" id="errorIcon">âš ï¸</div>
        <h1 id="errorTitle">Ø­Ø¯Ø« Ø®Ø·Ø£</h1>
        
        <div class="message" id="errorMessage">
            Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.
        </div>
        
        <div class="room-info" id="roomInfo" style="display:none;">
            <p>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨Ø«:</p>
            <p>ğŸ‘¤ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯: <span id="userName"></span></p>
            <p>ğŸ“º Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ©: <span id="roomId"></span></p>
        </div>
        
        <div class="actions">
            <a href="#" class="btn" id="retryBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</a>
            <a href="https://new-antik-p2p-20.onrender.com/viewer.html" class="btn btn-secondary">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </div>
    </div>

    <script>
        // Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        function getUrlParameters() {
            const params = {};
            const url = new URL(window.location.href);
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ room Ùˆ error Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
            const roomParam = url.searchParams.get('room');
            const errorType = url.searchParams.get('error');
            
            if (roomParam) {
                const parts = roomParam.split('/');
                if (parts.length >= 2) {
                    params.roomId = parts[0];
                    params.userName = decodeURIComponent(parts[1]);
                }
            }
            
            params.errorType = errorType;
            return params;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø£
        function displayError() {
            const params = getUrlParameters();
            const errorIcon = document.getElementById('errorIcon');
            const errorTitle = document.getElementById('errorTitle');
            const errorMessage = document.getElementById('errorMessage');
            const roomInfo = document.getElementById('roomInfo');
            const userNameEl = document.getElementById('userName');
            const roomIdEl = document.getElementById('roomId');
            const retryBtn = document.getElementById('retryBtn');
            
            // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØºØ±ÙØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
            if (params.roomId && params.userName) {
                roomInfo.style.display = 'block';
                userNameEl.textContent = params.userName;
                roomIdEl.textContent = params.roomId;
                
                // ØªØ¹Ø¯ÙŠÙ„ Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„ÙŠÙ†Ù‚Ù„ Ø¥Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø±Ø§Ø¨Ø·
                retryBtn.href = `https://new-antik-p2p-20.onnder.com/player.html?room=${params.roomId}/${encodeURIComponent(params.userName)}`;
            }
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø£
            switch(params.errorType) {
                case 'no-room':
                    errorIcon.textContent = 'âŒ';
                    errorTitle.textContent = 'Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ§Ù„Ø­';
                    errorMessage.textContent = 'Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ©. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ø§Ù„Ø´ÙƒÙ„: player.html?room=Ù…Ø¹Ø±Ù_Ø§Ù„ØºØ±ÙØ©/Ø§Ø³Ù…_Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…';
                    break;
                    
                case 'invalid-format':
                    errorIcon.textContent = 'ğŸ“';
                    errorTitle.textContent = 'ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Ø·Ø¦';
                    errorMessage.textContent = 'ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø§Ù„Ø´ÙƒÙ„: player.html?room=Ù…Ø¹Ø±Ù_Ø§Ù„ØºØ±ÙØ©/Ø§Ø³Ù…_Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…';
                    break;
                    
                case 'room-not-found':
                    errorIcon.textContent = 'ğŸ”';
                    errorTitle.textContent = 'Ø§Ù„ØºØ±ÙØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©';
                    errorMessage.textContent = 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ ØªÙ… Ø¥ØºÙ„Ø§Ù‚Ù‡Ø§. ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø¹Ø±Ù Ø§Ù„ØºØ±ÙØ© ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    break;
                    
                case 'stream-ended':
                    errorIcon.textContent = 'ğŸ›‘';
                    errorTitle.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¨Ø«';
                    errorMessage.textContent = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙØ°ÙŠØ¹. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø£Ùˆ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­ØªÙ‰ ÙŠØ¨Ø¯Ø£ Ø¨Ø« Ø¬Ø¯ÙŠØ¯.';
                    break;
                    
                case 'connection-failed':
                    errorIcon.textContent = 'ğŸ“¡';
                    errorTitle.textContent = 'ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„';
                    errorMessage.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¨Ø«. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                    break;
                    
                case 'server-unreachable':
                    errorIcon.textContent = 'ğŸš«';
                    errorTitle.textContent = 'Ø§Ù„Ø®Ø§Ø¯Ù… ØºÙŠØ± Ù…ØªØ§Ø­';
                    errorMessage.textContent = 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù… Ø§Ù„Ø¨Ø« Ø­Ø§Ù„ÙŠØ§Ù‹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹.';
                    break;
                    
                case 'kicked':
                    errorIcon.textContent = 'ğŸ‘‹';
                    errorTitle.textContent = 'ØªÙ… Ø·Ø±Ø¯Ùƒ';
                    errorMessage.textContent = 'ØªÙ… Ø·Ø±Ø¯Ùƒ Ù…Ù† Ø§Ù„ØºØ±ÙØ© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙØ°ÙŠØ¹. Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¨Ø«.';
                    break;
                    
                default:
                    errorIcon.textContent = 'âš ï¸';
                    errorTitle.textContent = 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    errorMessage.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = displayError;
    </script>
</body>
</html>
